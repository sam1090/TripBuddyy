<section id="main-content">
    <section class="wrapper">
        <div class="row">
            <div class="col-lg-9 main-chart">
                <div class="col-md-12 mb">
                    <a href="/journey/{{journey._id}}">
                        <!-- WHITE PANEL - TOP USER -->
                        <div class="white-panel">
                            <div class="white-header">
                                <h5 class="text-left">
                                    <img class="img-circle" src="{{journey.posted_by.profile_pic}}" style="margin-left: 5px;" width="25"/>
                                    <span style="margin-left: 5px;">
                                        @{{journey.posted_by.name}} {{timeInWords(journey.departure)}}
                                    </span>
                                </h5>
                            </div>
                            <p>
                                <img class="img-circle" src="{{journey.vehicle.png}}" width="300"/>
                                <br>
                                    <h2>
                                        {{journey.vehicle.type}} <h5>( {{journey.availableSeats}} Seat<span ng-if="journey.availableSeats != 1">s</span> Remaining 
                                        <span ng-if="journey.genderPreference != 'None'">, {{journey.genderPreference}} Preferred</span>
                                        ) 
                                        </h5>
                                    </h2>
                                </br>
                            </p>
                            <div class="row">
                                <div class="col-md-5">
                                    <h4 class="mt">
                                        {{journey.start.street}}
                            ,
                                    {{journey.start.area}}
                                    </h4>
                                </div>
                                <h4 class="col-md-2 col-sm-0 fa fa-arrow-right">
                                </h4>
                                <div class="col-md-5">
                                    <h4 class="mt">
                                        {{journey.end.street}}
                                ,
                                    {{journey.end.area}}
                                    </h4>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <h6 class="mt">
                                        &nbsp;
                                    </h6>
                                </div>
                            </div>
                            <div class="alert alert-info" ng-if="ifRequestedJourney">
                                <b>
                                    Waiting for confirmation!
                                </b>
                                You have requested to share this ride.
                            </div>
                            <!-- Request start -->
                            <div class="row darkblue-panel col-md-10 col-md-offset-1" ng-hide="hideRequestPanel">
                                <div>
                                    <h4>
                                        Seats
                                        <select ng-model="seatsRequestedByUser">
                                            <option ng-repeat="i in seatsAvailable" value="{{i}}">
                                                {{i}}
                                            </option>
                                        </select>
                                        <span class="btn btn-xs btn-primary" ng-click="makeRequest()">
                                            Request
                                        </span>
                                    </h4>
                                </div>
                            </div>
                            <!-- Request Ends ---->
                        </div>
                    </a>
                </div>
                <!-- /col-md-12 -->
                <div class="col-sm-12 ">
                    <!-- WHITE PANEL - TOP USER -->
                    <div class="white-panel">
                        <div class="white-header" style="background-color: #eaeaea;color: #777">
                            <h5>
                                PEOPLE ON THIS RIDE
                            </h5>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <p>
                                    <img class="img-circle" src="{{journey.posted_by.profile_pic}}" width="50"/>
                                </p>
                                <p>
                                    <b>
                                        {{journey.posted_by.name}}
                                    </b>
                                </p>
                            </div>
                            <div class="col-md-2" ng-repeat="user in journey.accepted_requests">
                                <p>
                                    <img class="img-circle" src="{{user.id.profile_pic}}" width="50"/>
                                </p>
                                <p>
                                    <b>
                                        {{user.id.name}}
                                    </b>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12" ng-if="journey.posted_by._id == user._id">
                    <!-- WHITE PANEL - TOP USER -->
                    <div class="white-panel">
                        <div class="white-header" style="background-color: #eaeaea;color: #777">
                            <h5>
                                REQUESTS FOR THIS RIDE
                            </h5>
                        </div>
                        <div class="row">
                            <div class="col-md-2" ng-repeat="user in journey.requested_by">
                                <p>
                                    <img class="img-circle" src="{{user.id.profile_pic}}" width="50"/>
                                </p>
                                <p>
                                    <b>
                                        {{user.id.name}} ({{user.seatsRequired}} seats)
                                    </b>
                                </p>
                                <p>
                                    <input class="btn btn-xs btn-primary" ng-click="accept(user.id._id)" type="button" value="Accept"/>
                                    <input class="btn btn-xs btn-danger" ng-click="decline(user.id._id)" type="button" value="Deny"/>
                                </p>
                            </div>
                            <h4 ng-show="journey.requested_by.length == 0">
                                No requests
                            </h4>
                        </div>
                    </div>
                </div>
                <!-- panel ends -->
            </div>
            <!-- /col-md-4 -->
            <!-- /col-lg-9 END SECTION MIDDLE -->
            <!-- **********************************************************************************************************************************************************
            RIGHT SIDEBAR CONTENT
            *********************************************************************************************************************************************************** -->
            <div ng-include="'/rightBar.html'">
            </div>
            <!-- /col-lg-3 -->
        </div>
        <!-- --/row ---->
    </section>
</section>
